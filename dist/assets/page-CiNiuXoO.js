import{u as N,a as c,b as k,c as w,r as u,j as e,F as r,B as p,n as b,i as x}from"./index-CbNkVbyA.js";import{u as _,F as h}from"./index-nfIlcgR5.js";import{config as a}from"./page-BeEG0WQN.js";import{u as z,g as C}from"./cols-BOaOIlnr.js";import{S as D}from"./index-MxrXartz.js";import{P as q}from"./index-UsCyEadM.js";import{R as A,C as Q}from"./row-CIqPCr0D.js";import{I as y}from"./index-VC5Afaew.js";import{Q as R}from"./QuestionCircleOutlined-CFn8tONO.js";import{D as X}from"./DeleteOutlined-BtHf3aBj.js";import{F as T}from"./FileDoneOutlined-CyyXZx_B.js";import"./utils-km2FGkQ4.js";import"./index-CC6DCI0n.js";import"./index-Bs3OOa-i.js";import"./index-CbNQXSC4.js";import"./index-De1vea9t.js";function le(){`${N().pathname.split("/").filter(s=>s).slice(0,2).join("/")}`;const F=c(({profile:s})=>s.data),{idToken:o}=c(s=>s.Auth),{locale:f}=c(({LanguageSwitcher:s})=>s.language),{id:t}=k(),[g]=_(),l=w(),[S,d]=u.useState(!1),[P,m]=u.useState(!1),$=s=>{d(!0),b.promise(x[t?a.edit.method:a.add.method](t?`${a.edit.url}/${t}`:a.add.url,s,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${o}`}}),{loading:e.jsx("div",{className:"min-w-[200px]",children:f==="ar"?"جاري المعالجة ":"Pending"}),success:i=>{const{message:n}=i.data;return l(-1),d(!1),n||"Backend Error Occured"},error:i=>{var n,j;return d(!1),((j=(n=i.response)==null?void 0:n.data)==null?void 0:j.message)||"Backend Error Occured"}})},v=()=>{m(!0),b.promise(x[a.delete.method](`${a.delete.url}/${t}`,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${o}`}}),{loading:f==="ar"?"جاري المعالجة ":"Pending",success:s=>{const{message:i}=s.data;return l(-1),m(!1),i||"Backend Error Occured"},error:s=>{var i,n;return m(!1),((n=(i=s.response)==null?void 0:i.data)==null?void 0:n.message)||"Backend Error Occured"}})},{isFetching:B,isPending:E,isError:M,data:O,isSuccess:I}=z({queryKey:[t,o],queryFn:()=>x[a.findOne.method](`${a.findOne.url}/${t}`,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${o}`}}),enabled:!!t});return u.useEffect(()=>{var s;I&&g.setFieldsValue((s=O.data)==null?void 0:s.data)},[E]),e.jsx(e.Fragment,{children:e.jsxs(D,{spinning:B,children:[e.jsx("div",{className:"flex flex-row-reverse",children:t&&C(a.delete.url,a.delete.type,F)?e.jsx(q,{title:e.jsx(r,{id:"delete.deleteItem"}),description:e.jsx(r,{id:"delete.areYouSure"}),onConfirm:()=>v(),icon:e.jsx(R,{style:{color:"red"}}),children:e.jsx(p,{loading:P,icon:e.jsx(X,{className:"mx-1"}),type:"primary",danger:!0,children:e.jsx(r,{id:"delete"})})}):""}),e.jsx(A,{children:e.jsx(Q,{span:24,children:e.jsxs(h,{form:g,onFinish:$,layout:"vertical",className:"login-form",children:[e.jsx(h.Item,{label:e.jsx(r,{id:"name_en"}),name:"name_en",rules:[{required:!0,message:e.jsx(r,{id:"name_en"})}],children:e.jsx(y,{type:"text",size:"large"})}),e.jsx(h.Item,{label:e.jsx(r,{id:"name_ar"}),name:"name_ar",rules:[{required:!0,message:e.jsx(r,{id:"name_ar"})}],children:e.jsx(y,{type:"text",size:"large"})}),e.jsxs("div",{className:"flex gap-4 flex-wrap mt-8",children:[e.jsx(p,{className:"w-[90px]",icon:e.jsx(T,{}),loading:S,type:"primary",htmlType:"submit",children:e.jsx("span",{children:t?e.jsx(r,{id:"global.save"}):e.jsx(r,{id:"global.save"})})}),e.jsx(p,{onClick:()=>l(-1),className:"w-[90px]",children:e.jsx(r,{id:"global.back"})})]})]})})})]})})}export{le as default};
