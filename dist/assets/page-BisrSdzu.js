import{c as k,a as l,r as Y,j as r,d as f,B as m,F as g,_ as u,i as h}from"./index-CbNkVbyA.js";import{M as b,a as M,g as n}from"./cols-BOaOIlnr.js";import{u as P}from"./useMutation-DwAQVmwo.js";import{P as v}from"./index-UsCyEadM.js";import{E as D}from"./index-VC5Afaew.js";import{Q as E}from"./QuestionCircleOutlined-CFn8tONO.js";import{D as A}from"./DeleteOutlined-BtHf3aBj.js";import"./utils-km2FGkQ4.js";import"./index-CC6DCI0n.js";import"./index-Bs3OOa-i.js";import"./index-CbNQXSC4.js";import"./index-De1vea9t.js";import"./index-MxrXartz.js";const t={add:{url:"Offers",method:"post",type:"Add"},edit:{url:"Offers",method:"put",type:"Update"},delete:{url:"Offers",method:"delete",type:"Delete"},findOne:{url:"Offers",method:"get",type:"Get"}},U=()=>{const y=k(),o=l(({profile:e})=>e.data),{idToken:c}=l(e=>e.Auth),{locale:O}=l(({LanguageSwitcher:e})=>e.language),[x,p]=Y.useState(!1),j=e=>{u.promise(h[t.delete.method](`${t.delete.url}/${e}`,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${c}`}}),{loading:O==="ar"?"جاري المعالجة ":"Pending",success:s=>{const{message:a}=s.data;return p(d=>!d),a||"Backend Error Occured"},error:s=>{var a,d;return((d=(a=s.response)==null?void 0:a.data)==null?void 0:d.message)||"Backend Error Occured"}})},i=P({mutationFn:({OfferId:e,status:s})=>h.put(`Offers/${s}`,null,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${c}`},params:{OfferId:e}}),onSuccess:async e=>{u.success(e.data.message),p(s=>!s)},onError:e=>{u.error(e.response.data.message)}});return r.jsx(b,{config:t,url:"Offers",refresher:x,addURL:"add",cols:M(["name","description",{title:"isAvailable",key:"isAvailable",content:e=>""+e},{title:"startTime",key:"startTime",content:e=>f(e).format("YYYY-MM-DD")},{title:"endTime",key:"endTime",content:e=>f(e).format("YYYY-MM-DD")},{title:"stopped",key:"stopped",content:(e,s)=>r.jsx(m,{loading:i.isPending&&i.variables.OfferId===s.id,disabled:i.isPending&&i.variables.OfferId===s.id,onClick:()=>{i.mutate({OfferId:s.id,status:e?"Resume":"Stop"})},children:e?"Resume":"Stop"})},...function(){return n(t.edit.url,t.edit.type,o)||n(t.findOne.url,t.findOne.type,o)||n(t.delete.url,t.delete.type,o)||!0?[{title:"actions",content:(s,a)=>r.jsxs("div",{className:"flex gap-2",children:[(n(t.findOne.url,t.findOne.type,o),r.jsx(m,{onClick:()=>y(`show/${a.id}`),icon:r.jsx(D,{},"show")})),(n(t.delete.url,t.delete.type,o),r.jsx(v,{title:r.jsx(g,{id:"delete.deleteItem"}),description:r.jsx(g,{id:"delete.areYouSure"}),onConfirm:()=>j(a.id),icon:r.jsx(E,{style:{color:"red"}}),children:r.jsx(m,{icon:r.jsx(A,{className:"mx-1"}),type:"primary",danger:!0})}))]})}]:[]}()])})};export{t as config,U as default};
