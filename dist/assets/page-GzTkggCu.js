import{u as N,a as p,b as k,c as w,r as x,j as e,F as r,B as h,n as y,i as g}from"./index-CbNkVbyA.js";import{u as z,F as d}from"./index-nfIlcgR5.js";import{config as a}from"./page-ESn0I62f.js";import{u as D,g as q}from"./cols-BOaOIlnr.js";import{S as C}from"./index-MxrXartz.js";import{P as A}from"./index-UsCyEadM.js";import{R as Q,C as R}from"./row-CIqPCr0D.js";import{I as b}from"./index-VC5Afaew.js";import{S}from"./index-Bs3OOa-i.js";import{Q as X}from"./QuestionCircleOutlined-CFn8tONO.js";import{D as T}from"./DeleteOutlined-BtHf3aBj.js";import{F as K}from"./FileDoneOutlined-CyyXZx_B.js";import"./utils-km2FGkQ4.js";import"./index-CC6DCI0n.js";import"./index-De1vea9t.js";import"./index-CbNQXSC4.js";const{Option:L}=S;function me(){`${N().pathname.split("/").filter(s=>s).slice(0,2).join("/")}`;const F=p(({profile:s})=>s.data),{idToken:o}=p(s=>s.Auth),{locale:l}=p(({LanguageSwitcher:s})=>s.language),{id:t}=k(),[j]=z(),m=w(),[_,c]=x.useState(!1),[v,u]=x.useState(!1),O=s=>{c(!0),y.promise(g[t?a.edit.method:a.add.method](t?`${a.edit.url}/${t}`:a.add.url,s,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${o}`}}),{loading:e.jsx("div",{className:"min-w-[200px]",children:l==="ar"?"جاري المعالجة ":"Pending"}),success:i=>{const{message:n}=i.data;return m(-1),c(!1),n||"Backend Error Occured"},error:i=>{var n,f;return c(!1),((f=(n=i.response)==null?void 0:n.data)==null?void 0:f.message)||"Backend Error Occured"}})},P=()=>{u(!0),y.promise(g[a.delete.method](`${a.delete.url}/${t}`,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${o}`}}),{loading:l==="ar"?"جاري المعالجة ":"Pending",success:s=>{const{message:i}=s.data;return m(-1),u(!1),i||"Backend Error Occured"},error:s=>{var i,n;return u(!1),((n=(i=s.response)==null?void 0:i.data)==null?void 0:n.message)||"Backend Error Occured"}})},{isFetching:$,isPending:B,isError:W,data:E,isSuccess:I}=D({queryKey:[t,o],queryFn:()=>g[a.findOne.method](`${a.findOne.url}/${t}`,{headers:{"X-Portal":"dashboard",Authorization:`Bearer ${o}`}}),enabled:!!t});return x.useEffect(()=>{var s;I&&j.setFieldsValue((s=E.data)==null?void 0:s.data)},[B]),e.jsx(e.Fragment,{children:e.jsxs(C,{spinning:$,children:[e.jsx("div",{className:"flex flex-row-reverse",children:t&&q(a.delete.url,a.delete.type,F)?e.jsx(A,{title:e.jsx(r,{id:"delete.deleteItem"}),description:e.jsx(r,{id:"delete.areYouSure"}),onConfirm:()=>P(),icon:e.jsx(X,{style:{color:"red"}}),children:e.jsx(h,{loading:v,icon:e.jsx(T,{className:"mx-1"}),type:"primary",danger:!0,children:e.jsx(r,{id:"delete"})})}):""}),e.jsx(Q,{children:e.jsx(R,{span:24,children:e.jsxs(d,{form:j,onFinish:O,layout:"vertical",className:"login-form",children:[e.jsx(d.Item,{label:e.jsx(r,{id:"name_en"}),name:"name_en",rules:[{required:!0,message:e.jsx(r,{id:"name_en"})}],children:e.jsx(b,{type:"text",size:"large"})}),e.jsx(d.Item,{label:e.jsx(r,{id:"name_ar"}),name:"name_ar",rules:[{required:!0,message:e.jsx(r,{id:"name_ar"})}],children:e.jsx(b,{type:"text",size:"large"})}),e.jsx(d.Item,{label:e.jsx(r,{id:"type"}),name:"type",rules:[{required:!0,message:e.jsx(r,{id:"type"})}],children:e.jsx(S,{size:"large",children:[{id:1,name_en:"Wet",name_ar:"مبتل"},{id:2,name_en:"Dry",name_ar:"جاف"}].map(s=>e.jsx(L,{value:s.id,children:l==="ar"?s.name_ar:s.name_en},s.id))})}),e.jsxs("div",{className:"flex gap-4 flex-wrap mt-8",children:[e.jsx(h,{className:"w-[90px]",icon:e.jsx(K,{}),loading:_,type:"primary",htmlType:"submit",children:e.jsx("span",{children:t?e.jsx(r,{id:"global.save"}):e.jsx(r,{id:"global.save"})})}),e.jsx(h,{onClick:()=>m(-1),className:"w-[90px]",children:e.jsx(r,{id:"global.back"})})]})]})})})]})})}export{me as default};
